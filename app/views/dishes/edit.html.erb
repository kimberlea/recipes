<div class="header-space"></div>

<div class="container" style="padding: 0px 15px;">
<div class="recipe-edit-container df-card df-col">

  <div class="page-header">
    <h1>
      <%= @title %>
    </h1>
    <% if @dish.new_record? %>
    <p class="lead" style="color: #777;">A dish can be anything, including an entree, dessert, or even a drink!</p>
    <div class="tips lead">
      <div class="tip row">
        <div class="col-xs-1">
        <i class="fa fa-check-circle"></i>
        </div>
        <div class="col-xs-11">
        You can promote your dishes for sale globally across all our members (great for cookies, cakes, and other pre-made dishes)
        </div>
      </div>
      <div class="tip row">
        <div class="col-xs-1">
        <i class="fa fa-check-circle"></i>
        </div>
        <div class="col-xs-11">
        You can store all your recipes for later and share with friends and family, or keep for yourself
        </div>
      </div>
    </div>
    <% end %>
  </div>

  <div class="form">

    <input type="hidden" name="id" value="<%= @dish.id %>"/>


    <div class="form-group">

      <label>Title</label>
      <input type="text" name="title" class="form-control input-lg" placeholder="Enter title here." value="<%= @dish.title %>"/>
    </div>

    <div class="form-group">
      <label>Description</label>
      <textarea class="form-control input-lg" rows="5" name="description" placeholder="Enter description here."><%= @dish.description %></textarea>
    </div>

    <hr class="clear">

    <h2><i class="fa fa-list-ol"></i>How to Make</h2>

    <div class="well well-slim">
      <div class="checkbox">
        <label style="font-weight: 200;">
          <input type="checkbox" name="is_recipe_hidden" <%= "checked" if !@dish.is_recipe_given %> onclick="toggleHowToMakeVisible(this);">
          I don't have the directions, or would prefer not to enter.
        </label>
      </div>
      <div class="help-block small text-muted" style="font-weight: 200;">
        <i class="fa fa-question-circle"></i>
        You can make the recipe private in the <strong>Privacy</strong> section at the bottom.
      </div>
    </div>

    <div class="howtomake-fields">
    <div class="form-group">
      <label>Ingredients</label>
      <textarea class="form-control input-lg" name="ingredients" placeholder="Butter
Eggs
Flour
. . ." rows="10"><%= @dish.ingredients %></textarea>
      <div class="help-block small text-muted">
        <i class="fa fa-question-circle"></i>
        Enter each ingredient on a new line.
      </div>
    </div>

    <div class="form-group">
      <label>Directions</label>
      <textarea class="form-control input-lg" name="directions" placeholder="1. Preheat oven to 350.
2. And then . . ." rows="10"><%= @dish.directions %></textarea>
      <div class="help-block small text-muted">
        <i class="fa fa-question-circle"></i>
        Enter each step on a new line with a number in front.
      </div>
    </div>

    <div class="form-group">
      <label>Preparation Time</label>
      <div class="row">
        <div class="col-xs-6 col-sm-4">
        <div class="input-group input-group-lg">

          <input type="number" name="prep_time_hours" class="form-control" placeholder="0" value="<%= @dish.prep_time_details[:hours] %>">
          <span class="input-group-addon">hours</span>
        </div>
        </div>
        <div class="col-xs-6 col-sm-4">
        <div class="input-group input-group-lg">
          <input type="number" name="prep_time_minutes" class="form-control" placeholder="30" value="<%= @dish.prep_time_details[:minutes] %>">
          <span class="input-group-addon">minutes</span>
        </div>
        </div>
      </div>
    </div>
    </div>

    <hr class="clear">

    <h2><i class="fa fa-shopping-cart"></i>Purchase Info</h2>
    <div class="form-group">
      <div class="checkbox">
        <label>
          <input type="checkbox" name="is_purchasable" <%= @dish.is_purchasable ? "checked" : "" %> onclick="togglePurchaseInfoVisible(this)"> This dish is available for sale pre-made.
        </label>
      </div>
      <textarea class="form-control input-lg purchase-info" name="purchase_info" rows="5" placeholder="(Optional) Website links, store names, and locations are all helpful."><%= @dish.purchase_info %></textarea>
    </div>

    <hr class="clear">
    <h2><i class="fa fa-info-circle"></i>More Info</h2>

    <div class="row">
      <div class="col-xs-6 col-sm-4">
        <div class="form-group">
          <label>Serving Size</label>
          <div class="input-group input-group-lg">
            <input type="text" name="serving_size" class="form-control" placeholder="8" value="<%= @dish.serving_size %>"/>
            <span class="input-group-addon">servings</span>
          </div>
        </div>
      </div>
    </div>

    <div class="form-group">
      <label>Dish Tags</label>
      <textarea class="form-control input-lg" name="tags" placeholder="dinner, italian, healthy, ..."><%= @dish.tags_to_str %></textarea>
      <div class="help-block small text-muted">
        <i class="fa fa-question-circle"></i>
        Enter tags separated by a comma, like: dinner, italian, healthy.
      </div>
    </div>

    <hr class="clear">
    <h2><i class="fa fa-camera"></i>Image Upload</h2>

    <div class="form-group">
      <input type="file" name="image"> 
      <% if @dish.image.url != nil %>
        <img src="<%= @dish.image.url %>" style="width: 150px;"/>
      <% else %>
        <div class="help-block small text-muted">
          <i class="fa fa-question-circle"></i>
          Don't have an image yet? Find a good one on <a href="https://images.google.com" target="_blank">Google Images</a> for now.
        </div>
      <% end %>
    
    </div>

    <hr class="clear">
    <h2><i class="fa fa-eye"></i>Privacy</h2>
    <div class="form-group">
      <div class="checkbox">
        <label>
          <input type="checkbox" name="is_recipe_private" <%= @dish.is_recipe_private ? "checked" : "" %>>Hide the ingredients and directions, so only I can see it. 
        </label>
      </div>
      <div class="checkbox">
        <label>
          <input type="checkbox" name="is_private" <%= @dish.is_private ? "checked" : "" %>> Make this entire dish private, so only I can see it. 
        </label>
      </div>
    </div>

    <hr class="clear">

    <div class="form-group">
      <button type="button" class="btn btn-success btn-lg" onclick="saveRecipe();">
        <i class="fa fa-check"></i>
        Save Dish
      </button>
      <% if @dish.id != nil %>
        <button type="button" class="btn btn-danger pull-right" onclick="promptDeleteRecipe();">
          <i class="fa fa-trash"></i>
           Delete
        </button>
      <% end %>

    </div>

  </div>


</div>
</div>

<script>
$(function() {
  toggleHowToMakeVisible();
  togglePurchaseInfoVisible();
});
</script>
